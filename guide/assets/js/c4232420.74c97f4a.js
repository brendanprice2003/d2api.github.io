"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[825],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=l(n),m=r,d=h["".concat(p,".").concat(m)]||h[m]||u[m]||i;return n?a.createElement(d,o(o({ref:t},c),{},{components:n})):a.createElement(d,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},176:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return u}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],s={title:"PGCRs"},p="postgame carnage reports",l={unversionedId:"activities/pgcrs",id:"activities/pgcrs",title:"PGCRs",description:"about",source:"@site/docs/activities/pgcrs.md",sourceDirName:"activities",slug:"/activities/pgcrs",permalink:"/guide/activities/pgcrs",editUrl:"https://github.com/d2api/d2api.github.io/tree/docs-src/docs/activities/pgcrs.md",tags:[],version:"current",frontMatter:{title:"PGCRs"},sidebar:"tutorialSidebar",previous:{title:"collecting",permalink:"/guide/activities/history"},next:{title:"the-big-scrape",permalink:"/guide/activities/the-big-scrape"}},c={},u=[{value:"about",id:"about",level:3},{value:"fetching PGCRs with the API",id:"fetching-pgcrs-with-the-api",level:3},{value:"PGCR data",id:"pgcr-data",level:3}],h={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"postgame-carnage-reports"},"postgame carnage reports"),(0,i.kt)("h3",{id:"about"},"about"),(0,i.kt)("p",null,"a postgame carnage report is the data structure that describes what happened in an instance.",(0,i.kt)("br",{parentName:"p"}),"\n","it has kill counts, scores, teams, fireteams, medals, etc."),(0,i.kt)("p",null,"an ",(0,i.kt)("strong",{parentName:"p"},'"instance"')," for the purposes of a PGCR, might be a series of patrol areas on the same planet, excluding other fireteams who wander by.",(0,i.kt)("br",{parentName:"p"}),"\n","but in most other types of activity, it's the same shared instance for everyone on your team, on an opposing team, people who cycle in and out of the party, etc.",(0,i.kt)("br",{parentName:"p"}),"\n","an instance generally ends when everyone leaves. as long as someone is still in the instance, it continues.",(0,i.kt)("br",{parentName:"p"}),"\n","you can ship-of-theseus it, until none of the original players is there, but as long as there was always a player in it, it is still the same instance."),(0,i.kt)("p",null,"if your whole team leaves a raid halfway through, then launches it again, that's a new instance. it may start from a checkpoint, but it's a separate copy of the game world. all the ammo drops and debris are gone, your kill counters are fresh, etc.",(0,i.kt)("br",{parentName:"p"}),"\n","API-wise, there's no fixed/guaranteed way to link those two PGCRs.",(0,i.kt)("br",{parentName:"p"}),"\n","if you want, you can assume they're related, from the fact that it's the same 6 people, and the first one wasn't completed, but that's it.",(0,i.kt)("br",{parentName:"p"}),"\n","raid PGCRs used to show whether they were fresh or started at a checkpoint, but they ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Bungie-net/api/issues/1320"},"no longer do")),(0,i.kt)("p",null,"they increment serially. there's a PGCR 1, a PGCR 2, etc.",(0,i.kt)("br",{parentName:"p"}),"\n","say hi to StyxBoatman on ",(0,i.kt)("a",{parentName:"p",href:"https://www.bungie.net/en/PGCR/1"},"https://www.bungie.net/en/PGCR/1")," :)",(0,i.kt)("br",{parentName:"p"}),"\n","he has a twitter account last i checked."),(0,i.kt)("h3",{id:"fetching-pgcrs-with-the-api"},"fetching PGCRs with the API"),(0,i.kt)("p",null,"endpoint spec: ",(0,i.kt)("a",{parentName:"p",href:"https://bungie-net.github.io/#Destiny2.GetPostGameCarnageReport"},"https://bungie-net.github.io/#Destiny2.GetPostGameCarnageReport")),(0,i.kt)("p",null,"all it takes to request a PGCR is its instanceId:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"you don't need to know any of the players involved."),(0,i.kt)("li",{parentName:"ul"},"you don't need oauth for a participant."),(0,i.kt)("li",{parentName:"ul"},"they can't be kept private.  ")),(0,i.kt)("p",null,"basically, just hit this URL with an API key",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"https://stats.bungie.net/Platform/Destiny2/Stats/PostGameCarnageReport/123456789/"),(0,i.kt)("br",{parentName:"p"}),"\n","to get the PGCR for instance #123456789"),(0,i.kt)("p",null,"if a PGCR doesn't exist, ",(0,i.kt)("em",{parentName:"p"},"usually")," because it hasn't been created yet, you'll probably get this error:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "ErrorCode": 1653,\n  "ThrottleSeconds": 0,\n  "ErrorStatus": "DestinyPGCRNotFound",\n  "Message": "The activity you were looking for was not found.",\n  "MessageData": {}\n}\n')),(0,i.kt)("h3",{id:"pgcr-data"},"PGCR data"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"period")," property is a timestamp of when the activity ",(0,i.kt)("em",{parentName:"li"},"began")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"activityDetails")," shows which activity was played, among other things"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"startingPhaseIndex")," rest in peace"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"teams")," ",(0,i.kt)("strong",{parentName:"li"},"exists even when there aren't teams"),", but it will be empty")))}m.isMDXComponent=!0}}]);