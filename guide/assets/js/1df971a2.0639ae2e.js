"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[637],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return k}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(n),k=a,m=d["".concat(c,".").concat(k)]||d[k]||l[k]||o;return n?r.createElement(m,s(s({ref:t},u),{},{components:n})):r.createElement(m,s({ref:t},u))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var p=2;p<o;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9704:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return k},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return l}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),s=["components"],i={},c="access token",p={unversionedId:"data-structures/access-token",id:"data-structures/access-token",title:"access token",description:"an access\xa0token is used to do authenticated requests.",source:"@site/docs/data-structures/access-token.md",sourceDirName:"data-structures",slug:"/data-structures/access-token",permalink:"/guide/data-structures/access-token",editUrl:"https://github.com/d2api/d2api.github.io/tree/docs-src/docs/data-structures/access-token.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"weird OAuth cases",permalink:"/guide/api/weird-cases"},next:{title:"completion reasons",permalink:"/guide/data-structures/completion-reasons"}},u={},l=[],d={toc:l};function k(e){var t=e.components,n=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"access-token"},"access token"),(0,o.kt)("p",null,"an ",(0,o.kt)("inlineCode",{parentName:"p"},"access\xa0token")," is used to do authenticated requests.\nit's a string that looks like this:",(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"Jq+R9ULSA1VWPGB/TBTDcuUcFJiI2Du/Cj8KUkQqkyXFGsAwwT7MakG/3ntvZNHrPHz="),(0,o.kt)("br",{parentName:"p"}),"\n","(the refresh token looks like this too)"),(0,o.kt)("p",null,"the ",(0,o.kt)("inlineCode",{parentName:"p"},"access\xa0token")," is sent along with the request as an HTTP header. the header's name is",(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"Authorization"),(0,o.kt)("br",{parentName:"p"}),"\n","and its value looks like",(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"Bearer Jq+R9ULSA1VWPGB/TBTDcuUcFJiI2Du/Cj8KUkQqkyXFGsAwwT7MakG/3ntvZNHrPHz=")),(0,o.kt)("p",null,"when a new ",(0,o.kt)("inlineCode",{parentName:"p"},"access\xa0token")," is fetched from the bungie API, the JSON response looks like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"{\n  access_token: string;\n  token_type: string;\n  expires_in: number;\n  refresh_token: string;\n  refresh_expires_in: number;\n  membership_id: string;\n}\n")),(0,o.kt)("p",null,"your application should ",(0,o.kt)("strong",{parentName:"p"},"save")," the ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"refresh_token")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"expires_in")," says how many seconds in the future the ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token")," will expire,",(0,o.kt)("br",{parentName:"p"}),"\n","so if ",(0,o.kt)("inlineCode",{parentName:"p"},"expires_in")," says ",(0,o.kt)("inlineCode",{parentName:"p"},"3600")," seconds, your application should calculate and ",(0,o.kt)("strong",{parentName:"p"},"save")," whatever time is 1 hour from right now. at that time, if you need to make another request, you should refresh the token instead of trying to use it."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"refresh_expires_in")," says how many seconds in the future the ",(0,o.kt)("inlineCode",{parentName:"p"},"refresh_token")," will expire,",(0,o.kt)("br",{parentName:"p"}),"\n","so if ",(0,o.kt)("inlineCode",{parentName:"p"},"refresh_expires_in")," says ",(0,o.kt)("inlineCode",{parentName:"p"},"7776000")," seconds, your application should calculate and ",(0,o.kt)("strong",{parentName:"p"},"save")," whatever time is 90 days from right now. at that time, if the token hasn't been refreshed, the user will probably need to log in again."),(0,o.kt)("p",null,"when you refresh access token data, use all the fields and ",(0,o.kt)("strong",{parentName:"p"},"discard any old data"),". the timeframes will be updated, and apply to the new tokens"))}k.isMDXComponent=!0}}]);